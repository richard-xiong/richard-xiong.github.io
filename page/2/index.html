<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"richard-xiong.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="XingServer">
<meta property="og:url" content="https://richard-xiong.github.io/page/2/index.html">
<meta property="og:site_name" content="XingServer">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Richard">
<meta property="article:tag" content="golang java elasticsearch">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://richard-xiong.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>XingServer</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="XingServer" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">XingServer</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">33</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">25</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">110</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/12/03/log-%E6%97%A5%E5%BF%97%E5%AE%9A%E6%97%B6%E6%B8%85%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/03/log-%E6%97%A5%E5%BF%97%E5%AE%9A%E6%97%B6%E6%B8%85%E7%90%86/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-03 03:55:01" itemprop="dateCreated datePublished" datetime="2020-12-03T03:55:01Z">2020-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-07 03:07:34" itemprop="dateModified" datetime="2020-12-07T03:07:34Z">2020-12-07</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、思路"><a href="#一、思路" class="headerlink" title="一、思路"></a>一、<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c8751434b9fb">思路</a></h3><p>定时删除日志，其实分为两个过程：</p>
<ol>
<li>查找符合条件的日志并删除</li>
<li>定时<br>过程1需要写一个查找脚本，过程2需要用到linux的crontab</li>
</ol>
<h3 id="二、查找并删除"><a href="#二、查找并删除" class="headerlink" title="二、查找并删除"></a>二、查找并删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vim delete-logs.sh</span><br></pre></td></tr></table></figure>

<p>删除指定目录下1天以上的日志文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> access.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;access.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> counter.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;counter.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \; </span><br><span class="line"><span class="meta">#</span><span class="bash"> geo.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;geo.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> recommend.err.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;recommend.err.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> recommend.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;recommend.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \;</span><br><span class="line"><span class="meta">#</span><span class="bash"> timer.log</span></span><br><span class="line">find /home/work/local/cb-recommendation/logs -name &quot;timer.log.*&quot; -mtime +1 -exec  rm -rf &#123;&#125;  \;</span><br></pre></td></tr></table></figure>

<p>授权</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> chmod +x delete-logs.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="三、linux定时任务"><a href="#三、linux定时任务" class="headerlink" title="三、linux定时任务"></a>三、linux定时任务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># crontab -e</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># | .-------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># | | .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># | | | | |</span></span><br><span class="line"><span class="comment"># * * * * * user-name command to be executed</span></span><br><span class="line"> 55 23 * * * /home/work/scripts/delete-logs.sh</span><br></pre></td></tr></table></figure>

<p>完工</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/22/golang%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E4%B9%8Binterface%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/22/golang%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E4%B9%8Binterface%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">golang源码学习之interface的底层实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-21 16:27:15 / 修改时间：08:30:29" itemprop="dateCreated datePublished" datetime="2020-11-21T16:27:15Z">2020-11-21</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>160</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="interface的底层实现"><a href="#interface的底层实现" class="headerlink" title="interface的底层实现"></a>interface的底层实现</h3><p>在golang中，interface也是一个结构体，记录了2个指针：</p>
<ul>
<li>指针1，指向该变量的类型</li>
<li>指针2，指向该变量的value</li>
</ul>
<p>_type<code>可以认为是Go语言中所有类型的公共描述，Go语言中几乎所有的数据结构都可以抽象成</code>_type<code>，是所有类型的表现，可以说是万能类型， </code>data`是指向具体数据的指针。 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/21/golang%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AAchannel%E5%B7%B2%E5%85%B3%E9%97%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/21/golang%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AAchannel%E5%B7%B2%E5%85%B3%E9%97%AD/" class="post-title-link" itemprop="url">golang源码学习之如何判断一个channel已关闭</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-21 11:26:02 / 修改时间：06:19:44" itemprop="dateCreated datePublished" datetime="2020-11-21T11:26:02Z">2020-11-21</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="如何判断一个channel已经关闭"><a href="#如何判断一个channel已经关闭" class="headerlink" title="如何判断一个channel已经关闭"></a>如何判断一个channel已经关闭</h3><ol>
<li><p>从channel中读取数据</p>
<ol>
<li>第二个字段为true时 证明channel可能没关闭、也可能已经关闭了、不能证明什么</li>
<li>第二个字段为false时，可以证明channel中已经没有残留数据、且已经关闭</li>
</ol>
</li>
<li><p>如果channel c已经被关闭,继续往它发送数据会导致<code>panic: send on closed channel</code>:</p>
<p>但是从这个关闭的channel中不但可以读取出已发送的数据，还可以不断的读取零值:</p>
</li>
<li><p>如果通过<code>range</code>读取，channel关闭后for循环会跳出：</p>
</li>
<li><p>可以直接读取channel结构hchan的closed字段，但问题chan.go没有开放这样的api，所以我们要用reflect这个黑科技了。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xiaorui.cc  https://blog.csdn.net/cyb_17302190874/article/details/106771295</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;unsafe&quot;</span></span><br><span class="line">    <span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isChanClosed</span><span class="params">(ch <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> reflect.TypeOf(ch).Kind() != reflect.Chan &#123;</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">&quot;only channels!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    cptr := *(*<span class="keyword">uintptr</span>)(unsafe.Pointer(</span><br><span class="line">        unsafe.Pointer(<span class="keyword">uintptr</span>(unsafe.Pointer(&amp;ch)) + unsafe.Sizeof(<span class="keyword">uint</span>(<span class="number">0</span>))),</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// this function will return true if chan.closed &gt; 0</span></span><br><span class="line">    <span class="comment">// see hchan on https://github.com/golang/go/blob/master/src/runtime/chan.go</span></span><br><span class="line">    <span class="comment">// type hchan struct &#123;</span></span><br><span class="line">    <span class="comment">// qcount   uint           // total data in the queue</span></span><br><span class="line">    <span class="comment">// dataqsiz uint           // size of the circular queue</span></span><br><span class="line">    <span class="comment">// buf      unsafe.Pointer // points to an array of dataqsiz elements</span></span><br><span class="line">    <span class="comment">// elemsize uint16</span></span><br><span class="line">    <span class="comment">// closed   uint32</span></span><br><span class="line">    <span class="comment">// **</span></span><br><span class="line"></span><br><span class="line">    cptr += unsafe.Sizeof(<span class="keyword">uint</span>(<span class="number">0</span>))*<span class="number">2</span></span><br><span class="line">    cptr += unsafe.Sizeof(unsafe.Pointer(<span class="keyword">uintptr</span>(<span class="number">0</span>)))</span><br><span class="line">    cptr += unsafe.Sizeof(<span class="keyword">uint16</span>(<span class="number">0</span>))</span><br><span class="line">    <span class="keyword">return</span> *(*<span class="keyword">uint32</span>)(unsafe.Pointer(cptr)) &gt; <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>配合一个context或者一个变量来做。就拿context来说，那么select不仅可以读取数据chan，且同事监听&lt;- context.Done() , 当context.Done()有事件，直接退出就ok了。</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 转自https://blog.csdn.net/cyb_17302190874/article/details/106771295</span></span><br><span class="line"> ...</span><br><span class="line">    ctx, cancel := context.WithCancel(context.Background())</span><br><span class="line">    <span class="built_in">close</span>(c)</span><br><span class="line">    cancel()</span><br><span class="line">exit:</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> data, ok := &lt;-c:</span><br><span class="line">            fmt.Println(data, ok)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> &lt;-ctx.Done():</span><br><span class="line">            <span class="keyword">break</span> exit</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     ...</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/17/%E7%BB%99%E4%BD%A0100w%E4%B8%AA%E6%95%B0%E5%AD%97%20%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E6%9C%80%E5%A4%A7%E7%9A%84100%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BC%8C%E9%82%A3%E4%B9%88%E4%B8%80%E4%B8%AA%E4%BA%BF%E5%91%A2%20%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/17/%E7%BB%99%E4%BD%A0100w%E4%B8%AA%E6%95%B0%E5%AD%97%20%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E6%9C%80%E5%A4%A7%E7%9A%84100%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BC%8C%E9%82%A3%E4%B9%88%E4%B8%80%E4%B8%AA%E4%BA%BF%E5%91%A2%20%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-17 12:14:10" itemprop="dateCreated datePublished" datetime="2020-11-17T12:14:10Z">2020-11-17</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>144</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="给你100w个数字-如何获取最大的100个数字，那么一个亿呢-怎么处理"><a href="#给你100w个数字-如何获取最大的100个数字，那么一个亿呢-怎么处理" class="headerlink" title="给你100w个数字 如何获取最大的100个数字，那么一个亿呢 怎么处理"></a>给你100w个数字 如何获取最大的100个数字，那么一个亿呢 怎么处理</h3><h3 id="排序-用哪种排序-他的时间复杂度-最优情况是什么-最差情况是什么样"><a href="#排序-用哪种排序-他的时间复杂度-最优情况是什么-最差情况是什么样" class="headerlink" title="排序 用哪种排序 他的时间复杂度 最优情况是什么 最差情况是什么样"></a>排序 用哪种排序 他的时间复杂度 最优情况是什么 最差情况是什么样</h3><h3 id="你有什么要问面试官的吗？"><a href="#你有什么要问面试官的吗？" class="headerlink" title="你有什么要问面试官的吗？"></a>你有什么要问面试官的吗？</h3><h3 id="您的团队是什么样的？你对您的团队有什么规划吗？有没有定期的做技术分享呢？然后说说自己团队的技术分享是怎么做的"><a href="#您的团队是什么样的？你对您的团队有什么规划吗？有没有定期的做技术分享呢？然后说说自己团队的技术分享是怎么做的" class="headerlink" title="您的团队是什么样的？你对您的团队有什么规划吗？有没有定期的做技术分享呢？然后说说自己团队的技术分享是怎么做的"></a>您的团队是什么样的？你对您的团队有什么规划吗？有没有定期的做技术分享呢？然后说说自己团队的技术分享是怎么做的</h3><h3 id="你对我本次的面试评价觉得怎么样？"><a href="#你对我本次的面试评价觉得怎么样？" class="headerlink" title="你对我本次的面试评价觉得怎么样？"></a>你对我本次的面试评价觉得怎么样？</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/10/%E4%BC%B4%E9%B1%BC%E9%9D%A2%E8%AF%95%E9%A2%98%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/10/%E4%BC%B4%E9%B1%BC%E9%9D%A2%E8%AF%95%E9%A2%98%20/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-10 13:46:28" itemprop="dateCreated datePublished" datetime="2020-11-10T13:46:28Z">2020-11-10</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>513</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>给定一个字符串表示的数字 str ， (只包含0-9，没有前导0)， </p>
<p>再给一个整数K，k &lt;= len(str) </p>
<p>从str里删掉k个字符，使剩下的字符串表示的数值最小 (原字符串里，每个字符的顺序是不能改变的。)</p>
<p>str=”351” k=1</p>
<p>“31”</p>
<p>str=”3519” k=1</p>
<p>“319” </p>
<p>3519 K=2</p>
<p>319 k=1</p>
<p>351  359 5193</p>
<p>str=”3519” k=2</p>
<p>35 51 </p>
<p>35 31  39 51 59 19</p>
<p>结果  len-k</p>
<p>15分钟</p>
<p>35991 k=2</p>
<p>351</p>
<p>12345  k=3</p>
<p>func getMin（str string,k int）string{</p>
<p> max:=-1 </p>
<p>for （i:=0;i&lt;len-k;i++）{</p>
<p>if str[i:k] &gt; max{}</p>
<p>}</p>
<p>for  k– {</p>
<p>first:=strconv.atoi(str[0])</p>
<p>second:=strconv.atoi(str[1]) //i</p>
<p>if first&lt;second{</p>
<p> str= str[0]+str[2:]</p>
<p>391</p>
<p>}else{</p>
<p>str= str[1：]</p>
<p> }</p>
<p>}</p>
<p>  return str</p>
<p>}</p>
<p>1000万推送量，下游PUSH接口的QPS 1w/s的限制</p>
<p>\1. 在预定时间内 比如 30分钟推完1000万条push</p>
<p>\2. 控制推送速率，不能打垮下游RPC接口</p>
<p><img src="/Users/mengfanxing_g/richard/blog/XingServer/source/_posts/image-20201110214534990.png" alt="image-20201110214534990">                       ![            </p>
<p>​          <img src="/Users/mengfanxing_g/richard/blog/XingServer/source/_posts/image-20201110214447919.png" alt="11">            </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/04/interview-go/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/04/interview-go/" class="post-title-link" itemprop="url">interview-go</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-03 16:53:25" itemprop="dateCreated datePublished" datetime="2020-11-03T16:53:25Z">2020-11-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-07 14:52:40" itemprop="dateModified" datetime="2020-11-07T14:52:40Z">2020-11-07</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>831</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h4><h4 id="go基础"><a href="#go基础" class="headerlink" title="go基础"></a>go基础</h4><ol>
<li><p>说说go的优点</p>
<ol>
<li>go的性能是Python的35倍</li>
<li>性能 （因为golang是机器代码） 编译后的文件可以直接放在机器上执行</li>
<li>开发的过程中 无效的字段或者包名引用 会强制提醒错误，有fmt 统一代码的格式</li>
<li>并发支持  channel和goroutine的性能很出色，可以非常方便的启动一个协程，很容易的生出数百万个goroutine</li>
<li>内置运行时gc，是通过三色法来对垃圾进行回收，可以满足大多数关于垃圾收集的请求</li>
<li>简单易学，非常容易上手</li>
<li>可以返回多个值，虽然java也支持（最多支持三个）</li>
<li>非常节省内存 1.12之前一个goroutinue的内存大概占用2kb，而一个java线程默认是2mb，1.17之后已经改为8kb了</li>
<li>接口的实现非常方便，可以通过内嵌struct来实现继承</li>
<li>if…;… {} 可以将变量的作用域放在if内 很棒</li>
<li>单元测试和并发测试都很方便</li>
</ol>
<p>缺点是</p>
<ol>
<li>缺乏框架、 没有像java那种开发小项目使用springboot springcloud 这种比较成熟的框架、不过对于goweb开发 有beego 、gin等、对于分布式有gomicro、gokit，</li>
<li>错误处理，经常要对错误进行判断 </li>
<li>使用的用法很多坑，比如slice传递的是引用不是副本 ，如果调用的func 不会对slice进行修改传递本身是没问题，如果需要修改就需要考虑使用copy（src，dest）来进行， 如果知道要slice要存储的空间是多少，在初始化的时候要使用 make([]int，nums)来声明，防止在append过程中会发生扩容操作。<br>nil切片、空切片、零切片的区别，var str []int 这种是nil切片 ，序列化之后是null，var str = []int{} 这种是空切片，序列化之后是[] 空数组，领切片就是 make([]int,10) 初始化之后 底层数组存储的数据都是0，官方不推荐创建空切片、也不推荐nil切片和nil进行对比</li>
<li>map中struct的单个字段 是非法的，因为map中的元素是不能寻址的</li>
</ol>
</li>
<li><p>谈谈golang的csp模型</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/04/interview-golang-GC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/04/interview-golang-GC/" class="post-title-link" itemprop="url">interview-golang GC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-03 16:04:24 / 修改时间：08:04:57" itemprop="dateCreated datePublished" datetime="2020-11-03T16:04:24Z">2020-11-03</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>过去一般采用两种办法：</p>
<ul>
<li>内存泄露检测工具。这种工具的原理一般是静态代码扫描，通过扫描程序检测可能出现内存泄露的代码段。然而检测工具难免有疏漏和不足，只能起到辅助作用。</li>
<li>智能指针。这是 c++ 中引入的自动内存管理方法，通过拥有自动内存管理功能的指针对象来引用对象，是程序员不用太关注内存的释放，而达到内存自动释放的目的。这种方法是采用最广泛的做法，但是对程序开发者有一定的学习成本（并非语言层面的原生支持），而且一旦有忘记使用的场景依然无法避免内存泄露。</li>
</ul>
<p>为了解决这个问题，后来开发出来的几乎所有新语言（java，python，php等等）都引入了语言层面的自动内存管理 – 也就是语言的使用者只用关注内存的申请而不必关心内存的释放，内存释放由虚拟机（virtual machine）或运行时（runtime）来自动进行管理。而这种对不再使用的内存资源进行自动回收的行为就被称为垃圾回收。</p>
<p>常用的垃圾回收的方法:</p>
<ul>
<li>引用计数（reference counting）</li>
</ul>
<p>这是最简单的一种垃圾回收算法，和之前提到的智能指针异曲同工。对每个对象维护一个引用计数，当引用该对象的对象被销毁或更新时被引用对象的引用计数自动减一，当被引用对象被创建或被赋值给其他对象时引用计数自动加一。当引用计数为0时则立即回收对象。</p>
<p>这种方法的优点是实现简单，并且内存的回收很及时。这种算法在内存比较紧张和实时性比较高的系统中使用的比较广泛，如ios cocoa框架，php，python等。</p>
<p>但是简单引用计数算法也有明显的缺点：</p>
<ol>
<li>频繁更新引用计数降低了性能。</li>
</ol>
<p>一种简单的解决方法就是编译器将相邻的引用计数更新操作合并到一次更新；还有一种方法是针对频繁发生的临时变量引用不进行计数，而是在引用达到0时通过扫描堆栈确认是否还有临时对象引用而决定是否释放。等等还有很多其他方法，具体可以参考这里。</p>
<ol>
<li>循环引用。</li>
</ol>
<p>当对象间发生循环引用时引用链中的对象都无法得到释放。最明显的解决办法是避免产生循环引用，如cocoa引入了strong指针和weak指针两种指针类型。或者系统检测循环引用并主动打破循环链。当然这也增加了垃圾回收的复杂度。</p>
<ul>
<li>标记-清除（mark and sweep）</li>
</ul>
<p>标记-清除（mark and sweep）分为两步，标记从根变量开始迭代得遍历所有被引用的对象，对能够通过应用遍历访问到的对象都进行标记为“被引用”；标记完成后进行清除操作，对没有标记过的内存进行回收（回收同时可能伴有碎片整理操作）。这种方法解决了引用计数的不足，但是也有比较明显的问题：每次启动垃圾回收都会暂停当前所有的正常代码执行，回收是系统响应能力大大降低！当然后续也出现了很多mark&amp;sweep算法的变种（如三色标记法）优化了这个问题。</p>
<ul>
<li>分代搜集（generation）</li>
</ul>
<p>java的jvm 就使用的分代回收的思路。在面向对象编程语言中，绝大多数对象的生命周期都非常短。分代收集的基本思想是，将堆划分为两个或多个称为代（generation）的空间。新创建的对象存放在称为新生代（young generation）中（一般来说，新生代的大小会比 老年代小很多），随着垃圾回收的重复执行，生命周期较长的对象会被提升（promotion）到老年代中（这里用到了一个分类的思路，这个是也是科学思考的一个基本思路）。</p>
<p>因此，新生代垃圾回收和老年代垃圾回收两种不同的垃圾回收方式应运而生，分别用于对各自空间中的对象执行垃圾回收。新生代垃圾回收的速度非常快，比老年代快几个数量级，即使新生代垃圾回收的频率更高，执行效率也仍然比老年代垃圾回收强，这是因为大多数对象的生命周期都很短，根本无需提升到老年代。</p>
<p>Golang GC 时会发生什么?</p>
<p>Golang 1.5后，采取的是“非分代的、非移动的、并发的、三色的”标记清除垃圾回收算法。</p>
<p>golang 中的 gc 基本上是标记清除的过程：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/KeKe-Li/For-learning-Go-Tutorial/blob/master/src/images/2.jpg"><img src="/images/interview-golang-GC/2.jpg" alt="img"></a></p>
<p>gc的过程一共分为四个阶段：</p>
<ol>
<li>栈扫描（开始时STW）</li>
<li>第一次标记（并发）</li>
<li>第二次标记（STW）</li>
<li>清除（并发）</li>
</ol>
<p>整个进程空间里申请每个对象占据的内存可以视为一个图，初始状态下每个内存对象都是白色标记。</p>
<ol>
<li>先STW，做一些准备工作，比如 enable write barrier。然后取消STW，将扫描任务作为多个并发的goroutine立即入队给调度器，进而被CPU处理</li>
<li>第一轮先扫描root对象，包括全局指针和 goroutine 栈上的指针，标记为灰色放入队列</li>
<li>第二轮将第一步队列中的对象引用的对象置为灰色加入队列，一个对象引用的所有对象都置灰并加入队列后，这个对象才能置为黑色并从队列之中取出。循环往复，最后队列为空时，整个图剩下的白色内存空间即不可到达的对象，即没有被引用的对象；</li>
<li>第三轮再次STW，将第二轮过程中新增对象申请的内存进行标记（灰色），这里使用了write barrier（写屏障）去记录</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/03/interview-golang%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/03/interview-golang%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/" class="post-title-link" itemprop="url">interview-golang常见的并发模型</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-03 14:19:48 / 修改时间：08:00:27" itemprop="dateCreated datePublished" datetime="2020-11-03T14:19:48Z">2020-11-03</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>常见的并发模型：</p>
<ol>
<li><p>channel</p>
<p>无缓冲的通道通常指通道的大小为0，也就是说，这种类型的通道再接收之前没有能力保存任何值，它要求发送goroutinue和接收goroutinue同时准备好，才可以完成发送和接收</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;)</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;start working&quot;</span>)</span><br><span class="line">        time.Sleep(time.Second * <span class="number">1</span>)</span><br><span class="line">        ch &lt;- <span class="keyword">struct</span>&#123;&#125;&#123;&#125;</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    &lt;-ch</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;finished&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当主 goroutine 运行到 &lt;-ch 接受 channel 的值的时候，如果该 channel 中没有数据，就会一直阻塞等待，直到有值。 这样就可以简单实现并发控制</p>
</li>
<li><p>sync.waitGroup</p>
<p>Goroutine是异步执行的，有的时候为了防止在结束mian函数的时候结束掉Goroutine，所以需要同步等待，这个时候就需要用 WaitGroup了，在 sync 包中，提供了 WaitGroup ，它会等待它收集的所有 goroutine 任务全部完成。在WaitGroup里主要有三个方法:</p>
<ul>
<li>Add, 可以添加或减少 goroutine的数量.</li>
<li>Done, 相当于Add(-1).</li>
<li>Wait, 执行后会堵塞主线程，直到WaitGroup 里的值减至0.</li>
</ul>
<p>在主 goroutine 中 Add(delta int) 索要等待goroutine 的数量。 在每一个 goroutine 完成后 Done() 表示这一个goroutine 已经完成，当所有的 goroutine 都完成后，在主 goroutine 中 WaitGroup 返回</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">    <span class="keyword">var</span> urls = []<span class="keyword">string</span>&#123;</span><br><span class="line">        <span class="string">&quot;http://www.golang.org/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;http://www.google.com/&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> _, url := <span class="keyword">range</span> urls &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(url <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">defer</span> wg.Done()</span><br><span class="line">            http.Get(url)</span><br><span class="line">        &#125;(url)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Wait()</span><br><span class="line">&#125;</span><br><span class="line">在Golang官网中对于WaitGroup介绍是A WaitGroup must not be copied after first use,在 WaitGroup 第一次使用后，不能被拷贝</span><br><span class="line"></span><br><span class="line">应用示例:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"> wg := sync.WaitGroup&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(wg sync.WaitGroup, i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;i:%d&quot;</span>, i)</span><br><span class="line">            wg.Done()</span><br><span class="line">        &#125;(wg, i)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Wait()</span><br><span class="line">    fmt.Println(<span class="string">&quot;exit&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">运行:</span><br><span class="line"></span><br><span class="line">i:<span class="number">1i</span>:<span class="number">3i</span>:<span class="number">2i</span>:<span class="number">0i</span>:<span class="number">4</span>fatal error: all goroutines are asleep - deadlock!</span><br><span class="line"></span><br><span class="line">goroutine <span class="number">1</span> [semacquire]:</span><br><span class="line">sync.runtime_Semacquire(<span class="number">0xc000094018</span>)</span><br><span class="line">        /home/keke/soft/<span class="keyword">go</span>/src/runtime/sema.<span class="keyword">go</span>:<span class="number">56</span> +<span class="number">0x39</span></span><br><span class="line">sync.(*WaitGroup).Wait(<span class="number">0xc000094010</span>)</span><br><span class="line">        /home/keke/soft/<span class="keyword">go</span>/src/sync/waitgroup.<span class="keyword">go</span>:<span class="number">130</span> +<span class="number">0x64</span></span><br><span class="line">main.main()</span><br><span class="line">        /home/keke/<span class="keyword">go</span>/Test/wait.<span class="keyword">go</span>:<span class="number">17</span> +<span class="number">0xab</span></span><br><span class="line">exit status <span class="number">2</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li>context</li>
</ol>
<p>通常,在一些简单场景下使用 channel 和 WaitGroup 已经足够了，但是当面临一些复杂多变的网络并发场景下 channel 和 WaitGroup 显得有些力不从心了。 比如一个网络请求 Request，每个 Request 都需要开启一个 goroutine 做一些事情，这些 goroutine 又可能会开启其他的 goroutine，比如数据库和RPC服务。 所以我们需要一种可以跟踪 goroutine 的方案，才可以达到控制他们的目的，这就是Go语言为我们提供的 Context，称之为上下文非常贴切，它就是goroutine 的上下文。 它是包括一个程序的运行环境、现场和快照等。每个程序要运行时，都需要知道当前程序的运行状态，通常Go 将这些封装在一个 Context 里，再将它传给要执行的 goroutine 。</p>
<p>context 包主要是用来处理多个 goroutine 之间共享数据，及多个 goroutine 的管理。</p>
<p>context 包的核心是 struct Context，接口声明如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A Context carries a deadline, cancelation signal, and request-scoped values</span></span><br><span class="line"><span class="comment">// across API boundaries. Its methods are safe for simultaneous use by multiple</span></span><br><span class="line"><span class="comment">// goroutines.</span></span><br><span class="line"><span class="keyword">type</span> Context <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="comment">// Done returns a channel that is closed when this `Context` is canceled</span></span><br><span class="line">    <span class="comment">// or times out.</span></span><br><span class="line">    Done() &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Err indicates why this Context was canceled, after the Done channel</span></span><br><span class="line">    <span class="comment">// is closed.</span></span><br><span class="line">    Err() error</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Deadline returns the time when this Context will be canceled, if any.</span></span><br><span class="line">    Deadline() (deadline time.Time, ok <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Value returns the value associated with key or nil if none.</span></span><br><span class="line">    Value(key <span class="keyword">interface</span>&#123;&#125;) <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Done() 返回一个只能接受数据的channel类型，当该context关闭或者超时时间到了的时候，该channel就会有一个取消信号</p>
<p>E rr() 在Done() 之后，返回context 取消的原因。</p>
<p>Deadline() 设置该context cancel的时间点</p>
<p>Value() 方法允许 Context 对象携带request作用域的数据，该数据必须是线程安全的。</p>
<p>Context 对象是线程安全的，你可以把一个 Context 对象传递给任意个数的 gorotuine，对它执行 取消 操作时，所有 goroutine 都会接收到取消信号。</p>
<p>一个 Context 不能拥有 Cancel 方法，同时我们也只能 Done channel 接收数据。 其中的原因是一致的：接收取消信号的函数和发送信号的函数通常不是一个。 典型的场景是：父操作为子操作操作启动 goroutine，子操作也就不能取消父操作。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/02/%E5%AD%9F%E5%87%A1%E6%98%9F%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%AE%80%E5%8E%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/02/%E5%AD%9F%E5%87%A1%E6%98%9F%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%AE%80%E5%8E%86/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-02 02:37:58" itemprop="dateCreated datePublished" datetime="2020-11-02T02:37:58Z">2020-11-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-22 15:03:23" itemprop="dateModified" datetime="2020-11-22T15:03:23Z">2020-11-22</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>孟凡星</p>
<p>电话：17600362123</p>
<p>邮箱：<a href="mailto:nizhidaoIEdeyisima@gmail.com">nizhidaoIEdeyisima@gmail.com</a>  <a href="mailto:17600362123@yahoo.com">17600362123@yahoo.com</a></p>
<h2 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h2><p>男 未婚</p>
<p>27岁</p>
<p>沈阳大学/本科</p>
<p>工作经验：4年</p>
<p>现居住地： 北京</p>
<p>户口所在地：辽宁-葫芦岛</p>
<p>求职意向 偏向于go</p>
<p>期望工作性质 : 全职</p>
<p>期望月薪 : 35k/月</p>
<p>期望从事行业 : 计算机软件</p>
<p>期望从事职业 : 软件开发</p>
<p>期望工作地点 : 北京</p>
<p>目前状况 : 我目前处于在职</p>
<p>自我评价</p>
<ol>
<li>老实、踏实、认真、仔细、有责任心是我的做事方式，总会高于领导的要求来严格要求自己，对领导分配的任务能高效及时的完成。</li>
<li>抗压能力、自学能力强，对在开发中用到的新技术、疑难问题，能够快速的从网上或其他地方获取解决办法，有自己的学习笔记，乐于技术分享</li>
<li>能指导初级、中级工程师进行开发。</li>
<li>对工作负责，有集体荣誉感，任劳任怨。</li>
<li>热爱学习，热衷于技术，经常学习新技术补充自己。</li>
<li>有带领团队的经验（5-8人）</li>
<li>对于容器化的部署有丰富的经验</li>
</ol>
<h2 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h2><h3 id="2018-7月至今北京小熊博望（百度国际化）"><a href="#2018-7月至今北京小熊博望（百度国际化）" class="headerlink" title="2018.7月至今北京小熊博望（百度国际化）"></a>2018.7月至今北京小熊博望（百度国际化）</h3><h3 id="2017-10月2018-7中国中煤能源股份有限公司"><a href="#2017-10月2018-7中国中煤能源股份有限公司" class="headerlink" title="2017.10月2018.7中国中煤能源股份有限公司"></a>2017.10月2018.7<a target="_blank" rel="noopener" href="https://www.baidu.com/link?url=LvM0KE2SlhWwuukv0f2xuySMWmdIx4Qe1WzDvim-m7UkX_HB1ZCZ2muEUsOyB_fE&wd=&eqid=ae8224ba0003a119000000035b4ad478">中国中煤能源股份有限公司</a></h3><p>###2016.12月2017.9北京智慧流科技教育有限公司</p>
<h2 id="项目经历"><a href="#项目经历" class="headerlink" title="项目经历"></a>项目经历</h2><p><strong>2018.7-至今</strong></p>
<p>Meet （视频聊天 reslet netty） </p>
<p>Sleepiness （轻应用类 springboot）</p>
<p>SleepinessCMS （sleepiness的cms平台 Vue）</p>
<p>MaterialPlatform （轻应用类 springboot）</p>
<p>MaterialPlatformCMS （贴纸平台的cms  Vue）</p>
<p>输入法主题自动打包 （小工具类 内部使用 Go）</p>
<p>壁纸SDK (轻应用类 Go)</p>
<p>壁纸SDKCMS (壁纸cms Vue)</p>
<p>生酮饮食 (轻应用类 Go)</p>
<p>场景化sdk （小工具类 Go）</p>
<p>海外赚 （轻应用类Go）</p>
<p>海外赚CMS （轻应用类Go 开发中）</p>
<p>luck-quiz (轻应用类Go)新meet(java)</p>
<p><strong>2017.10月-2018.7</strong></p>
<p>Itzh集团的ERP系统 （企业内部管理系统ssm ext）</p>
<p><strong>2016.10-2017.9</strong></p>
<p>陕旅英语（k12 dubbo）</p>
<p>闽教英语（k12 dubbo）</p>
<p>湘少英语（k12 dubbo）</p>
<p>粤人英语（k12 dubbo）</p>
<p>课堂宝 （素材资源上传平台）</p>
<p><strong>在国际化工作描述 :</strong> </p>
<ol>
<li>负责国际化出海产品的开发</li>
<li>老百度国际化项目的迁移</li>
<li>Elk集群的部署和维护</li>
<li>实时分析公司各个产品线的pv、uv 、接口超时情况、日志error报警</li>
<li>代码review及优化</li>
<li>线上项目的维护</li>
<li>Springboot 和golang 对小工具、轻应用产品的开发</li>
<li>使用AWS CI/CD，云容器的部署、服务上线</li>
<li>技术分享</li>
<li>把控各个产品线的工作进度，确保主要产品线的正常迭代&amp;注意组员的工作状态</li>
<li>负责对招聘新员工进行面试及安排</li>
</ol>
<p><strong>meet项目描述</strong> </p>
<p>这个项目是海外的视频语音聊天软件，由于是全球范围内都有普及，用户可以相互视频或者语音聊天，所以引发了用户的很高兴趣，为了提高用户的体验，缓存用户的数据结构改为了redis hash（对uid取模来分shard），为了可以多条件筛选附近的聊天室，选取了用mongodb来对聊天室进行geo 建模，对于多种匹配策略，复用了工厂的设计模式，通过这个项目的开发，学习了很多，深入的明白了如何写出高质量的代码，实现需求功能如何做技术选型，熟练的使用shell编写脚本，来计算pv uv，编写定时任务（后期我搭建了elastic集群，能够实时的收集各个产品的日志，图形化的展示产品的健康情况，对于错误日志和接口的响应情况进行分析，能够及时发送给rd），后期优化为视频聊天，提供主播对用户一对一服务的聊天、通过对主播的录屏、接通时长还有接通率来给主播进行打分，实现流量倾斜，通过一些假用户的消息下发来吸引用户付费。 目前日pv1400w的pv ，项目部署再aws的eks上，通过pod的性能参数、来考虑是否要增加机器。</p>
<p><strong>luckquiz项目描述</strong></p>
<p> 这个是一个基于beego开发的项目，有答题、刮卡、乐透、幸运转盘的小游戏，初期是吸引用户玩游戏来消耗金币、然后通过开广告来获取奖励的生态模式来运作。通过aes对用户和时间戳来加密生成验证用户有效性的token、像答题、刮卡、转盘每天玩的次数都是有次数限制的、而且奖励的金币概率和中奖概率也需要随时用户金币数和现金数的增加而改变。其中答题要求下发给用户的题目信息不允许有重复的，</p>
<p>方案一： 使用mysql not in（性能太差）<br>方案二： 了解到 其实是给用户下发的题目和题库的题目做差集，使用redis sdiff 命令 redis key是这样的，因为sdiff key1 key2 ，<br>key1 key2 如果不在同一个slot上，就会发出redis 错误，所以开始用{}，先计算key的hash，将answer 用{}括起来，使其<br>落在同一个slot上,题库的题目 {answer}:load-questions:%questionType ,用户看过的题目 {answer}:load-questions-by:%userId<br>能到达预期目的<br>方案三： 方案二虽然能达到预期目的，但是随着用户量的增加、单个slot的容量总是有限的，所以在用户注册的时候，给每个用户都会将题库复制一份，<br>rediskey 与userId进行绑定,题库的题目 answer:load-questions:{userId}:questionType ,用户看过的题目 answer:load-questions-by:{userId}<br>这样解决了单个slot内存过于庞大的问题这个还有一个好处就是差集的计算都交给了redis 的机器去操作<br>方案四：使用bitset 指令 SETBIT key offset value 复杂度 O(1)<br>一个bit位来表示某个元素对应的值或者状态,其中的key就是对应元素本身。我们知道8个bit可以组成一个Byte，所以bitmap本身会极大的节省储存空间。之前存储一个questionId是int64类型 ，大概的空间占用计算公式是：($offset/8/1024/1024)MB，也就是说8388608 个题目在redis里才会占用1mb的内存空间， offset 标识题目id，0 标识未打过，1标识已经答过</p>
<p><strong>2017.10-月2018.7</strong></p>
<p><strong>在中煤工作描述 :</strong> </p>
<ol>
<li>负责企业内部网站的开发</li>
<li>对接口的性能进行自测，并对代码调优。</li>
<li>相关模块接口的开发和单元测试</li>
<li>代码review</li>
<li>线上项目的维护&amp;项目进度的推进</li>
<li>和项目经理确定需求可行性。</li>
</ol>
<p><strong>项目描述 :</strong></p>
<p>这个项目是做集团的ERP系统，这个项目极大的提高了部门领导对项目的审核效率和对资产预算的评估情况，以及资产管理部门对资产分配的了解，项目处对各个项目详细信息的控制情况。 这个项目涉及了资产模块、项目模块和采购模块这三个主要功能、</p>
<p>个人承担对项目模块的全部开发。这个项目采用的是Ssm架构、通过对mybatis-generator开源框架的修改、自动化生成了对表的业务逻辑的正删改查、和接口的自动化测试脚本和junit测试实例、因为这个项目是企业的办公软件、大多数业务逻辑都是围绕对表的增删改查、</p>
<p>所以大大的减轻了开发的时间、提高了开发效率。 这个项目的亮点就是解耦很成功、三个主要功能都可以各自拆分开来、整个项目采用的是前后端分离的开发模式、大大的提高了开发效率。通过这个项目我学到了工作流的开发、更重要的是和小组人员的及时沟通</p>
<p>能减少不必要的开发上的错误、也能提高工作效率、再一次的认识到在开发前小组讨论对业务的熟悉对开发而言的重要及必要性。而且在讨论中能够对自己想法淬炼、增强思维的严谨性。</p>
<p><strong>项目描述 :</strong> </p>
<p>专业技能</p>
<ul>
<li>微服务的两个派系 阿里系的dubbo 和SpringCloud栈系的SpringBoot。</li>
<li>云服务      aws 、huawei CI/CD ，docker 和k8s的使用 </li>
<li>熟练在Linux系统上开发，编写shell脚本</li>
<li>java golang  python nodejs     </li>
<li>基本框架 Spring SpringMvc Mybatis Hebinate     JPA vue beego </li>
<li>服务治理：zookeper </li>
<li>请求治理：nginx、elb、nlb</li>
<li>数据库：mysql 、redis 、mangodb、elasticearch oracle sqlserver、sql优化</li>
<li>前端：html5(熟悉) extjs、jquery、jsp</li>
<li>高并发基本技能：队列 多线程 </li>
<li>网络通信：netty 、socket</li>
<li>爬虫 （jsoup、python）</li>
</ul>
<p><strong>教育经历</strong></p>
<p><strong>2013.09-2017.06</strong> <strong>沈阳大学 |</strong> <strong>计算机科学与技术 |**</strong>本科**</p>
<p>所获证书</p>
<ul>
<li>全国大学生创新创业训练计划项目 国家三等奖</li>
<li>辽宁省创青春大学生创业比赛  银奖</li>
<li>辽宁省计算机软件设计大赛-外包组三等奖</li>
<li>沈阳大学计算机软件设计竞赛 一等奖</li>
<li>互联网+大学生创新创业大赛     一等奖</li>
<li>大学生移动应用开发大赛 三等奖</li>
<li>大学英语四级</li>
</ul>
<p>语言能力</p>
<p><strong>英语 :</strong> <strong>读写能力良好 |</strong> <strong>听说能力良好</strong></p>
<p><strong>其他：优秀毕业生</strong> <strong>答辩成绩 94</strong></p>
<p> 孟凡星</p>
<p>电话：17600362123</p>
<p>邮箱：<a href="mailto:nizhidaoIEdeyisima@gmail.com">nizhidaoIEdeyisima@gmail.com</a>  <a href="mailto:17600362123@yahoo.com">17600362123@yahoo.com</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://richard-xiong.github.io/2020/11/02/%E7%BB%8F%E5%8E%86%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="XingServer">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/02/%E7%BB%8F%E5%8E%86%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-02 02:37:58 / 修改时间：08:20:41" itemprop="dateCreated datePublished" datetime="2020-11-02T02:37:58Z">2020-11-02</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>孟凡星</p>
<p>电话：17600362123</p>
<p>邮箱：<a href="mailto:nizhidaoIEdeyisima@gmail.com">nizhidaoIEdeyisima@gmail.com</a>  <a href="mailto:17600362123@yahoo.com">17600362123@yahoo.com</a></p>
<h2 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h2><p>男 未婚</p>
<p>27岁</p>
<p>沈阳大学/本科</p>
<p>工作经验：4年</p>
<p>现居住地： 北京</p>
<p>户口所在地：辽宁-葫芦岛</p>
<p>求职意向 偏向于go</p>
<p>期望工作性质 : 全职</p>
<p>期望月薪 : 35k/月</p>
<p>期望从事行业 : 计算机软件</p>
<p>期望从事职业 : 软件开发</p>
<p>期望工作地点 : 北京</p>
<p>目前状况 : 我目前处于在职</p>
<p>自我评价</p>
<ol>
<li>老实、踏实、认真、仔细、有责任心是我的做事方式，总会高于领导的要求来严格要求自己，对领导分配的任务能高效及时的完成。</li>
<li>抗压能力、自学能力强，对在开发中用到的新技术、疑难问题，能够快速的从网上或其他地方获取解决办法，有自己的学习笔记，乐于技术分享</li>
<li>能指导初级、中级工程师进行开发。</li>
<li>对工作负责，有集体荣誉感，任劳任怨。</li>
<li>热爱学习，热衷于技术，经常学习新技术补充自己。</li>
<li>有带领团队的经验（5-8人）</li>
<li>对于容器化的部署有丰富的经验</li>
</ol>
<h2 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h2><h3 id="2018-7月至今北京小熊博望（百度国际化）"><a href="#2018-7月至今北京小熊博望（百度国际化）" class="headerlink" title="2018.7月至今北京小熊博望（百度国际化）"></a>2018.7月至今北京小熊博望（百度国际化）</h3><h3 id="2017-10月2018-7中国中煤能源股份有限公司"><a href="#2017-10月2018-7中国中煤能源股份有限公司" class="headerlink" title="2017.10月2018.7中国中煤能源股份有限公司"></a>2017.10月2018.7<a target="_blank" rel="noopener" href="https://www.baidu.com/link?url=LvM0KE2SlhWwuukv0f2xuySMWmdIx4Qe1WzDvim-m7UkX_HB1ZCZ2muEUsOyB_fE&wd=&eqid=ae8224ba0003a119000000035b4ad478">中国中煤能源股份有限公司</a></h3><p>###2016.3月2017.9北京智慧流科技教育有限公司</p>
<h2 id="项目经历"><a href="#项目经历" class="headerlink" title="项目经历"></a>项目经历</h2><p><strong>2018.7-至今</strong></p>
<p>Meet （视频聊天 reslet netty） </p>
<p>Sleepiness （轻应用类 springboot）</p>
<p>SleepinessCMS （sleepiness的cms平台 Vue）</p>
<p>MaterialPlatform （轻应用类 springboot）</p>
<p>MaterialPlatformCMS （贴纸平台的cms  Vue）</p>
<p>输入法主题自动打包 （小工具类 内部使用 Go）</p>
<p>壁纸SDK (轻应用类 Go)</p>
<p>壁纸SDKCMS (壁纸cms Vue)</p>
<p>生酮饮食 (轻应用类 Go)</p>
<p>场景化sdk （小工具类 Go）</p>
<p>海外赚 （轻应用类Go）</p>
<p>海外赚CMS （轻应用类Go 开发中）</p>
<p>luck-quiz (轻应用类Go)</p>
<p>新meet(java)</p>
<p><strong>2017.10月-2018.7</strong></p>
<p>Itzh集团的ERP系统 （企业内部管理系统ssm ext）</p>
<p><strong>2016.10-2017.9</strong></p>
<p>陕旅英语（k12 dubbo）</p>
<p>闽教英语（k12 dubbo）</p>
<p>湘少英语（k12 dubbo）</p>
<p>粤人英语（k12 dubbo）</p>
<p>课堂宝 （素材资源上传平台）</p>
<p><strong>在国际化工作描述 :</strong> </p>
<ol>
<li>负责国际化出海产品的开发</li>
<li>老百度国际化项目的迁移</li>
<li>Elk集群的部署和维护</li>
<li>实时分析公司各个产品线的pv、uv 、接口超时情况、日志error报警</li>
<li>代码review及优化</li>
<li>线上项目的维护</li>
<li>Springboot 和golang 对小工具、轻应用产品的开发</li>
<li>使用AWS CI/CD，云容器的部署、服务上线</li>
<li>技术分享</li>
<li>把控各个产品线的工作进度，确保主要产品线的正常迭代&amp;注意组员的工作状态</li>
<li>负责对招聘新员工进行面试及安排</li>
</ol>
<p><strong>meet项目描述</strong> </p>
<p>这个项目是海外的视频语音聊天软件，由于是全球范围内都有普及，用户可以相互视频或者语音聊天，所以引发了用户的很高兴趣，为了提高用户的体验，缓存用户的数据结构改为了redis hash（对uid取模来分shard），为了可以多条件筛选附近的聊天室，选取了用mongodb来对聊天室进行geo 建模，对于多种匹配策略，复用了工厂的设计模式，通过这个项目的开发，学习了很多，深入的明白了如何写出高质量的代码，实现需求功能如何做技术选型，熟练的使用shell编写脚本，来计算pv uv，编写定时任务（后期我搭建了elastic集群，能够实时的收集各个产品的日志，图形化的展示产品的健康情况，对于错误日志和接口的响应情况进行分析，能够及时发送给rd），后期优化为视频聊天，提供主播对用户一对一服务的聊天、通过对主播的录屏、接通时长还有接通率来给主播进行打分，实现流量倾斜，通过一些假用户的消息下发来吸引用户付费。 目前日pv1400w的pv ，项目部署再aws的eks上，通过pod的性能参数、来考虑是否要增加机器。</p>
<p><strong>luckquiz项目描述</strong></p>
<p> 这个是一个基于beego开发的项目，有答题、刮卡、乐透、幸运转盘的小游戏，初期是吸引用户玩游戏来消耗金币、然后通过开广告来获取奖励的生态模式来运作。通过aes对用户和时间戳来加密生成验证用户有效性的token、像答题、刮卡、转盘每天玩的次数都是有次数限制的、而且奖励的金币概率和中奖概率也需要随时用户金币数和现金数的增加而改变。其中答题要求下发给用户的题目信息不允许有重复的，</p>
<p>方案一： 使用mysql not in（性能太差）<br>方案二： 了解到 其实是给用户下发的题目和题库的题目做差集，使用redis sdiff 命令 redis key是这样的，因为sdiff key1 key2 ，<br>key1 key2 如果不在同一个slot上，就会发出redis 错误，所以开始用{}，先计算key的hash，将answer 用{}括起来，使其<br>落在同一个slot上,题库的题目 {answer}:load-questions:%questionType ,用户看过的题目 {answer}:load-questions-by:%userId<br>能到达预期目的<br>方案三： 方案二虽然能达到预期目的，但是随着用户量的增加、单个slot的容量总是有限的，所以在用户注册的时候，给每个用户都会将题库复制一份，<br>rediskey 与userId进行绑定,题库的题目 answer:load-questions:{userId}:questionType ,用户看过的题目 answer:load-questions-by:{userId}<br>这样解决了单个slot内存过于庞大的问题这个还有一个好处就是差集的计算都交给了redis 的机器去操作<br>方案四：使用bitset 指令 SETBIT key offset value 复杂度 O(1)<br>一个bit位来表示某个元素对应的值或者状态,其中的key就是对应元素本身。我们知道8个bit可以组成一个Byte，所以bitmap本身会极大的节省储存空间。之前存储一个questionId是int64类型 ，大概的空间占用计算公式是：($offset/8/1024/1024)MB，也就是说8388608 个题目在redis里才会占用1mb的内存空间， offset 标识题目id，0 标识未打过，1标识已经答过</p>
<p><strong>2017.10-月2018.7</strong></p>
<p><strong>在中煤工作描述 :</strong> </p>
<ol>
<li>负责企业内部网站的开发</li>
<li>对接口的性能进行自测，并对代码调优。</li>
<li>相关模块接口的开发和单元测试</li>
<li>代码review</li>
<li>线上项目的维护&amp;项目进度的推进</li>
<li>和项目经理确定需求可行性。</li>
</ol>
<p><strong>项目描述 :</strong></p>
<p>这个项目是做集团的ERP系统，这个项目极大的提高了部门领导对项目的审核效率和对资产预算的评估情况，以及资产管理部门对资产分配的了解，项目处对各个项目详细信息的控制情况。 这个项目涉及了资产模块、项目模块和采购模块这三个主要功能、</p>
<p>个人承担对项目模块的全部开发。这个项目采用的是Ssm架构、通过对mybatis-generator开源框架的修改、自动化生成了对表的业务逻辑的正删改查、和接口的自动化测试脚本和junit测试实例、因为这个项目是企业的办公软件、大多数业务逻辑都是围绕对表的增删改查、</p>
<p>所以大大的减轻了开发的时间、提高了开发效率。 这个项目的亮点就是解耦很成功、三个主要功能都可以各自拆分开来、整个项目采用的是前后端分离的开发模式、大大的提高了开发效率。通过这个项目我学到了工作流的开发、更重要的是和小组人员的及时沟通</p>
<p>能减少不必要的开发上的错误、也能提高工作效率、再一次的认识到在开发前小组讨论对业务的熟悉对开发而言的重要及必要性。而且在讨论中能够对自己想法淬炼、增强思维的严谨性。</p>
<p><strong>项目描述 :</strong> </p>
<p>专业技能</p>
<ul>
<li>微服务的两个派系 阿里系的dubbo 和SpringCloud栈系的SpringBoot。</li>
<li>云服务      aws 、huawei CI/CD ，docker 和k8s的使用 </li>
<li>熟练在Linux系统上开发，编写shell脚本</li>
<li>java golang  python nodejs     </li>
<li>基本框架 Spring SpringMvc Mybatis Hebinate     JPA vue beego </li>
<li>服务治理：zookeper </li>
<li>请求治理：nginx、elb、nlb</li>
<li>数据库：mysql 、redis 、mangodb、elasticearch oracle sqlserver、sql优化</li>
<li>前端：html5(熟悉) extjs、jquery、jsp</li>
<li>高并发基本技能：队列 多线程 </li>
<li>网络通信：netty 、socket</li>
<li>爬虫 （jsoup、python）</li>
</ul>
<p><strong>教育经历</strong></p>
<p><strong>2013.09-2017.06</strong> <strong>沈阳大学 |</strong> <strong>计算机科学与技术 |**</strong>本科**</p>
<p>所获证书</p>
<ul>
<li>全国大学生创新创业训练计划项目 国家三等奖</li>
<li>辽宁省创青春大学生创业比赛  银奖</li>
<li>辽宁省计算机软件设计大赛-外包组三等奖</li>
<li>沈阳大学计算机软件设计竞赛 一等奖</li>
<li>互联网+大学生创新创业大赛     一等奖</li>
<li>大学生移动应用开发大赛 三等奖</li>
<li>大学英语四级</li>
</ul>
<p>语言能力</p>
<p><strong>英语 :</strong> <strong>读写能力良好 |</strong> <strong>听说能力良好</strong></p>
<p><strong>其他：优秀毕业生</strong> <strong>答辩成绩 94</strong></p>
<p> 孟凡星</p>
<p>电话：17600362123</p>
<p>邮箱：<a href="mailto:nizhidaoIEdeyisima@gmail.com">nizhidaoIEdeyisima@gmail.com</a>  <a href="mailto:17600362123@yahoo.com">17600362123@yahoo.com</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Richard"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Richard</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">110</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/RomanSeven7" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;RomanSeven7" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:nizhidaoiedeyisima@gmail.com" title="E-Mail → mailto:nizhidaoiedeyisima@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/p/1005056204086487" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;p&#x2F;1005056204086487" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">264k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">4:01</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
